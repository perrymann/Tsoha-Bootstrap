<?phpclass Kiinteisto extends BaseModel{		public $id, $nimi, $katuosoite, $postinumero, $postitoimipaikka;	public function __construct($attributes){		parent::__construct($attributes);		$this->validators = array('validate_name', 'validate_address', 'validate_zipcode', 'validate_city');	}	public function save(){		$query = DB::connection()->prepare('INSERT INTO Kiinteisto (nimi, katuosoite, postinumero, postitoimipaikka) VALUES (:nimi, :katuosoite, :postinumero, :postitoimipaikka) RETURNING id');		$query->execute(array('nimi' => $this->nimi, 'katuosoite' => $this->katuosoite, 'postinumero' => $this->postinumero, 'postitoimipaikka' => $this->postitoimipaikka));		$row = $query->fetch();		//Kint::trace();  		//Kint::dump($row);		$this->id = $row['id'];	}	public static function all(){		$query = DB::connection()->prepare('SELECT * FROM Kiinteisto');		$query->execute();		$rows = $query->fetchAll();		$kiinteistot = array();		foreach ($rows as $row) {			$kiinteistot[] = new Kiinteisto(array(				'id' => $row['id'],				'nimi' => $row['nimi'],				'katuosoite' => $row['katuosoite'],				'postinumero' => $row['postinumero'],				'postitoimipaikka' => $row['postitoimipaikka']			));			}		return $kiinteistot;	}	// public static function kiinteistoByAddress($katuosoite){	// 	$query = DB::connection()->prepare('SELECT * FROM Kiinteisto WHERE katuosoite = :katuosoite');	// 	$query->execute(array('katuosoite' => $katuosoite));	// 	$rows = $query->fetchAll();	// 	$autopaikat = array();	// 	foreach ($rows as $row) {	// 		$kiinteistot[] = new Kiinteisto(array(	// 			'id' => $row['id'],	// 			'nimi' => $row['nimi'],	// 			'katuosoite' => $row['katuosoite'],	// 			'postinumero' => $row['postinumero'],	// 			'postitoimipaikka' => $row['postitoimipaikka']	// 		));		// 	}	// 	return $kiinteistot;	// }	// public static function all($options){	//     $query_string = 'SELECT * FROM Kiinteisto WHERE katuosoite = :katuosoite';	//     $options = array('katuosoite' => $options['katuosoite']);	//     if(isset($options['search'])){	//       	$query_string .= ' AND katuosoite LIKE :like';	//       	$options['like'] = '%' . $options['search'] . '%';	//     }	//     $query = DB::connection()->prepare($query_string);	//     $query->execute($options);	//     $rows = $query->fetchAll();	//     $kiinteistot = array();	//     foreach($rows as $row){	//  	    $kiinteistot[] = new Kiinteisto($row);	//     }	//     return $kiinteistot; //  	}		public function getParkingBoxes($id){		$query = DB::connection()->prepare('SELECT * FROM Autopaikka WHERE kiinteisto_id = :id ORDER BY nimi');		$query->execute(array('id' => $id));		$rows = $query->fetchAll();		$autopaikat = array();		foreach($rows as $row) {			$autopaikat[] = new Autopaikka(array(			'id' => $row['id'],			'kiinteisto_id' => $row['kiinteisto_id'],			'nimi' => $row['nimi'],			'tyyppi' => $row['tyyppi'],			'sahkopistoke' => $row['sahkopistoke']			));		}		return $autopaikat;	}	public static function findById($id){		$query = DB::connection()->prepare('SELECT * FROM Kiinteisto WHERE id = :id LIMIT 1'); 		$query->execute(array('id' =>$id));		$row = $query->fetch();				if ($row) {			$haettukiinteisto = new Kiinteisto(array(				'id' => $row['id'],				'nimi' => $row['nimi'],				'katuosoite' => $row['katuosoite'],				'postinumero' => $row['postinumero'],				'postitoimipaikka' => $row['postitoimipaikka']			));				return $haettukiinteisto;		}		return null;  	}  	//edit  	public function update(){  		$query = DB::connection()->prepare('UPDATE Kiinteisto SET nimi = :nimi, katuosoite = :katuosoite, postinumero = :postinumero, postitoimipaikka = :postitoimipaikka WHERE id = :id');		$query->execute(array('id' => $this->id, 'nimi' => $this->nimi, 'katuosoite' => $this->katuosoite, 'postinumero' => $this->postinumero, 'postitoimipaikka' => $this->postitoimipaikka));			}	//destroy	public function destroy(){		$query = DB::connection()->prepare('DELETE FROM Kiinteisto WHERE id = :id');		$query->execute(array('id' => $this->id));	}	}